@model TournamentViewModel

@inject IViewLocalizer Localizer

@{
    ViewData["Title"] = "Tournament Details";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<h2>@Model.Title</h2><a asp-controller="Tournaments" asp-action="Upsert" asp-route-id="@Model.Id">@Localizer["Edit"]</a><br />
@if (!string.IsNullOrEmpty(Model.Slogan))
{
    <h3>@Model.Slogan</h3>
}

<div id="tournamentDetails" class="container">
    <div class="row">
        <div class="col-md-4"><p>@Localizer["Status"]</p></div>
        <div class="col-md-4"><p>@Model.Status</p></div>
    </div>

    <div class="row">
        <div class="col-md-4"><p>@Localizer["Start"]</p></div>
        <div class="col-md-4"><p>@Model.DateStart</p></div>
    </div>

    <div class="row">
        <div class="col-md-4"><p>@Localizer["End"]</p></div>
        <div class="col-md-4"><p>@Model.DateEnd</p></div>
    </div>

    <div class="row">
        <div class="col-md-4"><p>@Localizer["Country"]</p></div>
        <div class="col-md-4"><p>@Model.Country</p></div>
    </div>

    <div class="row">
        <div class="col-md-4"><p>@Localizer["City"]</p></div>
        <div class="col-md-4"><p>@Model.City</p></div>
    </div>

    <div class="row">
        <div class="col-md-4"><p>@Localizer["Address"]</p></div>
        <div class="col-md-4"><p>@Model.Address</p></div>
    </div>

    @if (!string.IsNullOrEmpty(Model.Club))
    {
        <div class="row">
            <div class="col-md-4"><p>@Localizer["Club"]</p></div>
            <div class="col-md-4"><p>@Model.Club</p></div>
        </div>
    }
    
    <div class="row">
        <div class="col-md-4"><p>@Localizer["ArmyPoints"]</p></div>
        <div class="col-md-4"><p>@Model.ArmyPoints</p></div>
    </div>

    <div class="row">
        <div class="col-md-4"><p>@Localizer["Fee"]</p></div>
        <div class="col-md-4"><p>@Model.Fee</p></div>
    </div>

    <div class="row">
        <div class="col-md-4"><p>@Localizer["BPWin"]</p></div>
        <div class="col-md-4"><p>@Model.Bpwin</p></div>
    </div>
    <div class="row">

        <div class="col-md-4"><p>@Localizer["BPTie"]</p></div>
        <div class="col-md-4"><p>@Model.Bptie</p></div>
    </div>
    <div class="row">

        <div class="col-md-4"><p>@Localizer["BPLoss"]</p></div>
        <div class="col-md-4"><p>@Model.Bploss</p></div>
    </div>

    @if (!string.IsNullOrEmpty(Model.SpecificRules))
    {
        <div class="row">
            <div class="col-md-4"><p>@Localizer["SpecificRules"]</p></div>
            <div class="col-md-4"><p>@Model.SpecificRules</p></div>
        </div>
    }
</div>

<br />

<div id="players" class="container">
    <p>@Localizer["Players"]</p>
    <table class="table table-striped table-dark">
        <thead>
            <tr>
                <th scope="col">@Localizer["Player"]</th>
                <th scope="col">@Localizer["Block"]</th>
                <th scope="col">@Localizer["Faction"]</th>
                <th scope="col">@Localizer["BonusPoints"]</th>
                <th scope="col">@Localizer["PenaltyPoints"]</th>
                <th scope="col">@Localizer["Bp"]</th>
                <th scope="col">@Localizer["Sp"]</th>
                <th scope="col">@Localizer["SoS"]</th>
                <th scope="col">@Localizer["TotalBigPoints"]</th>
            </tr>
        </thead>
        <tbody>
            @foreach (var player in Model.PlayersList)
            {
            <tr>
                <th scope="col">@player.User</th>
                <td>@player.Block</td>
                <td>@player.Faction</td>
                <td>@player.BonusPoints</td>
                <td>@player.PenaltyPoints</td>
                <td>@player.Bp</td>
                <td>@player.Sp</td>
                <td>@player.SoS</td>
                <td>@player.TotalBigPoints</td>
            </tr>
            }

        </tbody>
    </table>
</div>

<br />

<div id="rounds" class="container">
    <p>@Localizer["Rounds"]</p>
    @foreach (var round in Model.RoundsList)
    {
        <div class="row">
            <p>@Localizer["Round"] @round.Number</p>
            <table class="table table-striped table-dark">
                <thead>
                    <tr>
                        <th scope="col">@Localizer["PlayerA"]</th>
                        <th scope="col">@Localizer["PlayerB"]</th>
                        <th scope="col">@Localizer["BoardNumber"]</th>
                        <th scope="col">@Localizer["BoardType"]</th>
                        <th scope="col">@Localizer["Bpa"]</th>
                        <th scope="col">@Localizer["Bpb"]</th>
                        <th scope="col">@Localizer["Spa"]</th>
                        <th scope="col">@Localizer["Spb"]</th>
                        <th scope="col">@Localizer["SoSa"]</th>
                        <th scope="col">@Localizer["SoSb"]</th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var match in round.Matches)
                    {
                        <tr>
                            <th scope="row">@match.PlayerA</th>
                            <td>@match.PlayerB</td>
                            <td>@match.BoardNumber</td>
                            <td>@match.BoardName</td>
                            <td>@match.Bpa</td>
                            <td>@match.Bpb</td>
                            <td>@match.Spa</td>
                            <td>@match.Spb</td>
                            <td>@match.SoSa</td>
                            <td>@match.SoSb</td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>
    }

    <br /><br />

    @if (Model.FirstRoundAvailable)
    {
        <a asp-controller="Tournaments" asp-action="AssignPairsForFirstRound" asp-route-id="@Model.Id">@Localizer["GenerateFirstRound"]</a>
    }
    else if (!Model.FirstRoundAvailable && Model.NextRoundAvailable)
    {
        <a asp-controller="Tournaments" asp-action="AssignPairsForNewRound" asp-route-id="@Model.Id"> @Localizer["GenerateNextRound"]</a>
    }
    else if (!Model.FirstRoundAvailable && !Model.NextRoundAvailable && Model.FinishAvailable)
    {
        <a asp-controller="Tournaments" asp-action="Finish" asp-route-id="@Model.Id"> @Localizer["Finish"]</a>
    }
</div>