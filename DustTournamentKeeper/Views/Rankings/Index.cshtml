@model IList<Ranking>

@inject IViewLocalizer Localizer

@{
    ViewData["Title"] = @Localizer["RankingsTitle"];
}

<script src="~/js/Rankings.js"></script>

<h2>@Localizer["Rankings"]</h2>

<div class="table-bordered border-info rounded p-xl-1 mb-1">
    <div class="form-group">
        <label>@Localizer["DateFromFilter"]</label>
        <input id="dateFromFilter" type="date" class="form-control" value="@ViewBag.Filter.DateFrom" />
    </div>
    
    <div class="form-group">
        <label>@Localizer["DateToFilter"]</label>
        <input id="dateToFilter" type="date" class="form-control" value="@ViewBag.Filter.DateTo" />
    </div>

    <div class="form-group">
        <label>@Localizer["CountryFilter"]</label>
        <input id="countryFilter" class="form-control" value="@ViewBag.Filter.Country" />
    </div>

    <div class="form-group">
        <label>@Localizer["CityFilter"]</label>
        <input id="cityFilter" class="form-control" value="@ViewBag.Filter.City" />
    </div>

    <div class="form-group">
        <label>@Localizer["ClubFilter"]</label>
        <input id="clubFilter" class="form-control" value="@ViewBag.Filter.ClubName" />
    </div>

    <div class="form-group">
        <label>@Localizer["ClubIdFilter"]</label>
        <input id="clubIdFilter" class="form-control" type="number" value="@ViewBag.Filter.ClubId" />
    </div>

    <div class="form-group">
        <label>@Localizer["BigPointsMinFilter"]</label>
        <input id="bigPointsMinFilter" class="form-control" type="number" value="@ViewBag.Filter.BigPointsMin" />
    </div>

    <div class="form-group">
        <label>@Localizer["BigPointsMaxFilter"]</label>
        <input id="bigPointsMaxFilter" class="form-control" type="number" value="@ViewBag.Filter.BigPointsMax" />
    </div>

    <div class="form-group">
        <label>@Localizer["SmallPointsMinFilter"]</label>
        <input id="smallPointsMinFilter" class="form-control" type="number" value="@ViewBag.Filter.SmallPointsMin" />
    </div>

    <div class="form-group">
        <label>@Localizer["SmallPointsMaxFilter"]</label>
        <input id="smallPointsMaxFilter" class="form-control" type="number" value="@ViewBag.Filter.SmallPointsMax" />
    </div>

    <a id="applyFilter" class="btn btn-secondary mb-1" asp-controller="Rankings" asp-action="Index"
       asp-route-dateFrom="null"
       asp-route-dateTo="null"
       asp-route-country="null"
       asp-route-city="null"
       asp-route-clubId="null"
       asp-route-clubName="null"
       asp-route-bigPointsMin="null"
       asp-route-bigPointsMax="null"
       asp-route-smallPointsMin="null"
       asp-route-smallPointsMax="null">@Localizer["ApplyFilter"]</a>

    <a id="clearFilter" class="btn btn-secondary mb-1" asp-controller="Rankings" asp-action="Index"
       asp-route-dateFrom=""
       asp-route-dateTo=""
       asp-route-country=""
       asp-route-city=""
       asp-route-clubId="null"
       asp-route-clubName=""
       asp-route-bigPointsMin="null"
       asp-route-bigPointsMax="null"
       asp-route-smallPointsMin="null"
       asp-route-smallPointsMax="null">@Localizer["ClearFilter"]</a>
</div>

<table class="table table-striped table-dark table-hover table-sm table-responsive-sm">
    <thead>
        <tr>
            <th scope="col">@Localizer["Player"]</th>
            <th scope="col">@Localizer["BigPoints"]</th>
            <th scope="col">@Localizer["SmallPoints"]</th>
            <th scope="col">@Localizer["TournamentsPlayed"]</th>
            <th scope="col">@Localizer["TournamentsWon"]</th>
        </tr>
    </thead>
    <tbody>
        @if (Model == null || Model.Count() == 0)
        {
            <tr><td colspan="4">@Localizer["NoRanking"]</td></tr>
        }
        else
        {
            @foreach (var ranking in Model)
            {
                <tr>
                    <th scope="row"><a asp-controller="Players" asp-action="Details" asp-route-id="@ranking.Player.Id">@ranking.Player.UserName</a></th>
                    <td>@ranking.BigPoints</td>
                    <td>@ranking.SmallPoints</td>
                    <td>@ranking.TournamentsPlayed</td>
                    <td>@ranking.TournamentsWon</td>
                </tr>
            }
        }
    </tbody>
</table>

<script>
    $(document).ready(function () {
        $('#applyFilter').click(applyFilter);
    });
</script>